<!--Incoming Friend Requests-->
<div class="card mb-4 mb-lg-0">
  <div class="card-body p-0">
    <ul class="list-group list-group-flush rounded-3">
      <li class="list-group-item d-flex justify-content-between align-items-center p-3">
        <p class="mb-0">Friend Requests</p>
      </li>
      <% unless @requests.nil? %>
        <% @requests.each do |user| %>
          <%if !Friendship.reacted?(current_user.id,user.id) && user.first_name != current_user.first_name && Friendship.pending_reacted?(current_user.id,user.id) && Friendship.request_origin(current_user.id,user.id)%>
            <div class="nearby-user p-2">
              <div class="row align-middle">
                <div class="col-md-2 col-sm-2">
                  <%= image_tag "avatar-fallback.svg", class: "avatar dropdown-toggle", id: "navbarDropdown", data: { bs_toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
                </div>
                <div class="col-md-6 col-sm-6" style="text-align:center;">
                  <% if user.id == current_user.id %>
                    <span class="align-middle"><%= user.first_name%> <%= user.last_name%></span>
                  <% else %>
                    <span class="align-middle"><%= user.first_name%> <%= user.last_name%></span>
                  <% end %>
                </div>
                <div class="col-md-4 col-sm-4">
                  <%= button_to("Confirm", friendship_path(id: Friendship.find_friendship(current_user.id,user.id)),class: "btn btn-primary w-100 h-100",  :method => :patch, params: { friendship: { confirmed: true}}) %>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </ul>
  </div>
  </div>
</div>
<!--Incoming Friend Requests End-->
